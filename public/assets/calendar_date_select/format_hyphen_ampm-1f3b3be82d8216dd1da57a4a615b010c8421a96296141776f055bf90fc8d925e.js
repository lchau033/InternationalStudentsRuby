Date.prototype.toFormattedString=function(t){return str=this.getFullYear()+"-"+Date.padded2(this.getMonth()+1)+"-"+Date.padded2(this.getDate()),t&&(hour=this.getHours(),str+=" "+this.getAMPMHour()+":"+this.getPaddedMinutes()+" "+this.getAMPM()),str},Date.parseFormattedString=function(t){var e="([0-9]{4})(-([0-9]{2})(-([0-9]{2})( ([0-9]{1,2}):([0-9]{2})? *(pm|am)?)?)?)?",s=t.match(new RegExp(e,"i"));if(null==s)return Date.parse(t);var r=0,o=new Date(s[1],0,1);return s[3]&&o.setMonth(s[3]-1),s[5]&&o.setDate(s[5]),s[7]&&(hours=parseInt(s[7],10),r=0,s[9]&&(is_pm="pm"==s[9].toLowerCase(),is_pm&&hours<=11&&(hours+=12),is_pm||12!=hours||(hours=0)),o.setHours(hours)),s[8]&&o.setMinutes(s[8]),s[10]&&o.setSeconds(s[10]),s[12]&&o.setMilliseconds(1e3*Number("0."+s[12])),s[14]&&(r=60*Number(s[16])+Number(s[17]),r*="-"==s[15]?1:-1),o};